{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.VelocityTracker = void 0;\n  class VelocityTracker {\n    constructor() {\n      this.history = [];\n      this.lastPosition = undefined;\n      this.lastTimestamp = undefined;\n    }\n    add(position) {\n      const timestamp = new Date().valueOf();\n      if (this.lastPosition && this.lastTimestamp && timestamp > this.lastTimestamp) {\n        const diff = position - this.lastPosition;\n        if (diff > 0.001 || diff < -0.001) {\n          this.history.push(diff / (timestamp - this.lastTimestamp));\n        }\n      }\n      this.lastPosition = position;\n      this.lastTimestamp = timestamp;\n    }\n    estimateSpeed() {\n      const finalTrend = this.history.slice(-3);\n      const sum = finalTrend.reduce((r, v) => r + v, 0);\n      return sum / finalTrend.length;\n    }\n    reset() {\n      this.history = [];\n      this.lastPosition = undefined;\n      this.lastTimestamp = undefined;\n    }\n  }\n  exports.VelocityTracker = VelocityTracker;\n});","lineCount":35,"map":[[6,2,1,7],[6,8,1,13,"VelocityTracker"],[6,23,1,28],[6,24,1,29],[7,4,5,4,"constructor"],[7,15,5,15,"constructor"],[7,16,5,15],[7,18,5,18],[8,6,6,8],[8,10,6,12],[8,11,6,13,"history"],[8,18,6,20],[8,21,6,23],[8,23,6,25],[9,6,7,8],[9,10,7,12],[9,11,7,13,"lastPosition"],[9,23,7,25],[9,26,7,28,"undefined"],[9,35,7,37],[10,6,8,8],[10,10,8,12],[10,11,8,13,"lastTimestamp"],[10,24,8,26],[10,27,8,29,"undefined"],[10,36,8,38],[11,4,9,4],[12,4,10,4,"add"],[12,7,10,7,"add"],[12,8,10,8,"position"],[12,16,10,16],[12,18,10,18],[13,6,11,8],[13,12,11,14,"timestamp"],[13,21,11,23],[13,24,11,26],[13,28,11,30,"Date"],[13,32,11,34],[13,33,11,35],[13,34,11,36],[13,35,11,37,"valueOf"],[13,42,11,44],[13,43,11,45],[13,44,11,46],[14,6,12,8],[14,10,12,12],[14,14,12,16],[14,15,12,17,"lastPosition"],[14,27,12,29],[14,31,12,33],[14,35,12,37],[14,36,12,38,"lastTimestamp"],[14,49,12,51],[14,53,12,55,"timestamp"],[14,62,12,64],[14,65,12,67],[14,69,12,71],[14,70,12,72,"lastTimestamp"],[14,83,12,85],[14,85,12,87],[15,8,13,12],[15,14,13,18,"diff"],[15,18,13,22],[15,21,13,25,"position"],[15,29,13,33],[15,32,13,36],[15,36,13,40],[15,37,13,41,"lastPosition"],[15,49,13,53],[16,8,14,12],[16,12,14,16,"diff"],[16,16,14,20],[16,19,14,23],[16,24,14,28],[16,28,14,32,"diff"],[16,32,14,36],[16,35,14,39],[16,36,14,40],[16,41,14,45],[16,43,14,47],[17,10,15,16],[17,14,15,20],[17,15,15,21,"history"],[17,22,15,28],[17,23,15,29,"push"],[17,27,15,33],[17,28,15,34,"diff"],[17,32,15,38],[17,36,15,42,"timestamp"],[17,45,15,51],[17,48,15,54],[17,52,15,58],[17,53,15,59,"lastTimestamp"],[17,66,15,72],[17,67,15,73],[17,68,15,74],[18,8,16,12],[19,6,17,8],[20,6,18,8],[20,10,18,12],[20,11,18,13,"lastPosition"],[20,23,18,25],[20,26,18,28,"position"],[20,34,18,36],[21,6,19,8],[21,10,19,12],[21,11,19,13,"lastTimestamp"],[21,24,19,26],[21,27,19,29,"timestamp"],[21,36,19,38],[22,4,20,4],[23,4,21,4,"estimateSpeed"],[23,17,21,17,"estimateSpeed"],[23,18,21,17],[23,20,21,20],[24,6,22,8],[24,12,22,14,"finalTrend"],[24,22,22,24],[24,25,22,27],[24,29,22,31],[24,30,22,32,"history"],[24,37,22,39],[24,38,22,40,"slice"],[24,43,22,45],[24,44,22,46],[24,45,22,47],[24,46,22,48],[24,47,22,49],[25,6,23,8],[25,12,23,14,"sum"],[25,15,23,17],[25,18,23,20,"finalTrend"],[25,28,23,30],[25,29,23,31,"reduce"],[25,35,23,37],[25,36,23,38],[25,37,23,39,"r"],[25,38,23,40],[25,40,23,42,"v"],[25,41,23,43],[25,46,23,48,"r"],[25,47,23,49],[25,50,23,52,"v"],[25,51,23,53],[25,53,23,55],[25,54,23,56],[25,55,23,57],[26,6,24,8],[26,13,24,15,"sum"],[26,16,24,18],[26,19,24,21,"finalTrend"],[26,29,24,31],[26,30,24,32,"length"],[26,36,24,38],[27,4,25,4],[28,4,26,4,"reset"],[28,9,26,9,"reset"],[28,10,26,9],[28,12,26,12],[29,6,27,8],[29,10,27,12],[29,11,27,13,"history"],[29,18,27,20],[29,21,27,23],[29,23,27,25],[30,6,28,8],[30,10,28,12],[30,11,28,13,"lastPosition"],[30,23,28,25],[30,26,28,28,"undefined"],[30,35,28,37],[31,6,29,8],[31,10,29,12],[31,11,29,13,"lastTimestamp"],[31,24,29,26],[31,27,29,29,"undefined"],[31,36,29,38],[32,4,30,4],[33,2,31,0],[34,2,31,1,"exports"],[34,9,31,1],[34,10,31,1,"VelocityTracker"],[34,25,31,1],[34,28,31,1,"VelocityTracker"],[34,43,31,1],[35,0,31,1],[35,3]],"functionMap":{"names":["<global>","VelocityTracker","VelocityTracker#constructor","VelocityTracker#add","VelocityTracker#estimateSpeed","finalTrend.reduce$argument_0","VelocityTracker#reset"],"mappings":"AAA,OC;ICI;KDI;IEC;KFU;IGC;sCCE,eD;KHE;IKC;KLI;CDC"}},"type":"js/module"}]}