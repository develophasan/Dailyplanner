{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"VelocityTracker\", {\n    enumerable: true,\n    get: function () {\n      return VelocityTracker;\n    }\n  });\n  class VelocityTracker {\n    constructor() {\n      this.history = [];\n      this.lastPosition = undefined;\n      this.lastTimestamp = undefined;\n    }\n    add(position) {\n      const timestamp = new Date().valueOf();\n      if (this.lastPosition && this.lastTimestamp && timestamp > this.lastTimestamp) {\n        const diff = position - this.lastPosition;\n        if (diff > 0.001 || diff < -0.001) {\n          this.history.push(diff / (timestamp - this.lastTimestamp));\n        }\n      }\n      this.lastPosition = position;\n      this.lastTimestamp = timestamp;\n    }\n    estimateSpeed() {\n      const finalTrend = this.history.slice(-3);\n      const sum = finalTrend.reduce((r, v) => r + v, 0);\n      return sum / finalTrend.length;\n    }\n    reset() {\n      this.history = [];\n      this.lastPosition = undefined;\n      this.lastTimestamp = undefined;\n    }\n  }\n});","lineCount":41,"map":[[7,2,1,0,"Object"],[7,8,1,0],[7,9,1,0,"defineProperty"],[7,23,1,0],[7,24,1,0,"exports"],[7,31,1,0],[8,4,1,0,"enumerable"],[8,14,1,0],[9,4,1,0,"get"],[9,7,1,0],[9,18,1,0,"get"],[9,19,1,0],[10,6,1,0],[10,13,1,0,"VelocityTracker"],[10,28,1,0],[11,4,1,0],[12,2,1,0],[13,2,1,7],[13,8,1,13,"VelocityTracker"],[13,23,1,28],[13,24,1,29],[14,4,5,4,"constructor"],[14,15,5,15,"constructor"],[14,16,5,15],[14,18,5,18],[15,6,6,8],[15,10,6,12],[15,11,6,13,"history"],[15,18,6,20],[15,21,6,23],[15,23,6,25],[16,6,7,8],[16,10,7,12],[16,11,7,13,"lastPosition"],[16,23,7,25],[16,26,7,28,"undefined"],[16,35,7,37],[17,6,8,8],[17,10,8,12],[17,11,8,13,"lastTimestamp"],[17,24,8,26],[17,27,8,29,"undefined"],[17,36,8,38],[18,4,9,4],[19,4,10,4,"add"],[19,7,10,7,"add"],[19,8,10,8,"position"],[19,16,10,16],[19,18,10,18],[20,6,11,8],[20,12,11,14,"timestamp"],[20,21,11,23],[20,24,11,26],[20,28,11,30,"Date"],[20,32,11,34],[20,33,11,35],[20,34,11,36],[20,35,11,37,"valueOf"],[20,42,11,44],[20,43,11,45],[20,44,11,46],[21,6,12,8],[21,10,12,12],[21,14,12,16],[21,15,12,17,"lastPosition"],[21,27,12,29],[21,31,12,33],[21,35,12,37],[21,36,12,38,"lastTimestamp"],[21,49,12,51],[21,53,12,55,"timestamp"],[21,62,12,64],[21,65,12,67],[21,69,12,71],[21,70,12,72,"lastTimestamp"],[21,83,12,85],[21,85,12,87],[22,8,13,12],[22,14,13,18,"diff"],[22,18,13,22],[22,21,13,25,"position"],[22,29,13,33],[22,32,13,36],[22,36,13,40],[22,37,13,41,"lastPosition"],[22,49,13,53],[23,8,14,12],[23,12,14,16,"diff"],[23,16,14,20],[23,19,14,23],[23,24,14,28],[23,28,14,32,"diff"],[23,32,14,36],[23,35,14,39],[23,36,14,40],[23,41,14,45],[23,43,14,47],[24,10,15,16],[24,14,15,20],[24,15,15,21,"history"],[24,22,15,28],[24,23,15,29,"push"],[24,27,15,33],[24,28,15,34,"diff"],[24,32,15,38],[24,36,15,42,"timestamp"],[24,45,15,51],[24,48,15,54],[24,52,15,58],[24,53,15,59,"lastTimestamp"],[24,66,15,72],[24,67,15,73],[24,68,15,74],[25,8,16,12],[26,6,17,8],[27,6,18,8],[27,10,18,12],[27,11,18,13,"lastPosition"],[27,23,18,25],[27,26,18,28,"position"],[27,34,18,36],[28,6,19,8],[28,10,19,12],[28,11,19,13,"lastTimestamp"],[28,24,19,26],[28,27,19,29,"timestamp"],[28,36,19,38],[29,4,20,4],[30,4,21,4,"estimateSpeed"],[30,17,21,17,"estimateSpeed"],[30,18,21,17],[30,20,21,20],[31,6,22,8],[31,12,22,14,"finalTrend"],[31,22,22,24],[31,25,22,27],[31,29,22,31],[31,30,22,32,"history"],[31,37,22,39],[31,38,22,40,"slice"],[31,43,22,45],[31,44,22,46],[31,45,22,47],[31,46,22,48],[31,47,22,49],[32,6,23,8],[32,12,23,14,"sum"],[32,15,23,17],[32,18,23,20,"finalTrend"],[32,28,23,30],[32,29,23,31,"reduce"],[32,35,23,37],[32,36,23,38],[32,37,23,39,"r"],[32,38,23,40],[32,40,23,42,"v"],[32,41,23,43],[32,46,23,48,"r"],[32,47,23,49],[32,50,23,52,"v"],[32,51,23,53],[32,53,23,55],[32,54,23,56],[32,55,23,57],[33,6,24,8],[33,13,24,15,"sum"],[33,16,24,18],[33,19,24,21,"finalTrend"],[33,29,24,31],[33,30,24,32,"length"],[33,36,24,38],[34,4,25,4],[35,4,26,4,"reset"],[35,9,26,9,"reset"],[35,10,26,9],[35,12,26,12],[36,6,27,8],[36,10,27,12],[36,11,27,13,"history"],[36,18,27,20],[36,21,27,23],[36,23,27,25],[37,6,28,8],[37,10,28,12],[37,11,28,13,"lastPosition"],[37,23,28,25],[37,26,28,28,"undefined"],[37,35,28,37],[38,6,29,8],[38,10,29,12],[38,11,29,13,"lastTimestamp"],[38,24,29,26],[38,27,29,29,"undefined"],[38,36,29,38],[39,4,30,4],[40,2,31,0],[41,0,31,1],[41,3]],"functionMap":{"names":["<global>","VelocityTracker","VelocityTracker#constructor","VelocityTracker#add","VelocityTracker#estimateSpeed","finalTrend.reduce$argument_0","VelocityTracker#reset"],"mappings":"AAA,OC;ICI;KDI;IEC;KFU;IGC;sCCE,eD;KHE;IKC;KLI;CDC"},"hasCjsExports":false},"type":"js/module"}]}